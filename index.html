<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Simple POS- Sundries</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Login -->
  <div class="login-container" id="login-container">
    <h2>POS Login</h2>
    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">
    <button onclick="checkLogin()">Login</button>
    <p id="login-error" style="color: red;"></p>
  </div>
  <!-- POS Form -->
  <div class="pos-container" id="pos-container" style="display: none;">
    <h2 id="store-name">Simple POS- Sundries</h2>

    <form id="sale-form">
      <div class="form-row">
        <input type="text" id="item" placeholder="Search Item" list="item-list" required>
        <datalist id="item-list"></datalist>
      </div>

      <div class="form-row">
        <select id="unit" required>
          <option value="ct">Carton (Ct)</option>
          <option value="dz">Dozen (Dz)</option>
          <option value="pc" selected>Piece (Pc)</option>
        </select>
      </div>

      <div class="form-row">
        <input type="number" id="quantity" step="any" min="0" placeholder="Quantity" required>
      </div>

      <div class="form-row">
        <input type="number" id="price" placeholder="Price per item" required readonly>
      </div>

      <div class="form-row">
        <label for="discount">Discount:</label>
        <input type="number" id="discount" value="0" />
      </div>

      <div class="form-row">
        <label for="extra">Extra Charges:</label>
        <input type="number" id="extra" value="0" />
      </div>

      <div class="form-row">
        <label for="payment-method">Payment Method:</label>
        <select id="payment-method">
          <option value="Cash">Cash</option>
          <option value="Mpesa">Mpesa</option>
          <option value="Bank">Bank</option>
          <option value="Credit">Credit</option>
        </select>
      </div>

      <div class="form-row">
        <input type="text" id="total" placeholder="Total" readonly />
      </div>

      <div class="form-row">
        <button type="submit">Add to Order</button>
      </div>
    </form>

    <!-- Order Summary -->
    <table id="sales-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Item</th>
          <th>Unit</th>
          <th>Qty</th>
          <th>Price</th>
          <th>Discount</th>
          <th>Extra</th>
          <th>Total</th>
          <th>Payment</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <div class="form-row">
      <button id="submit-all-btn" onclick="submitAllSales()" style="display: none;">Submit All Items</button>
      <button id="clear-all-btn" onclick="clearAllSales()" style="display: none;">Clear All Items</button>
    </div>

    <!-- Stock Display Button -->
    <button onclick="showStockLevels()" style="margin: 10px; background: #27ae60; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;">
        ðŸ“¦ View Stock Levels
    </button>

    <!-- Stock Adjustment Button -->
    <button onclick="showStockAdjustment()" style="margin: 10px; background: #3498db; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;">
        ðŸ“Š Adjust Stock
    </button>
  </div>

<!-- Stock Display Modal -->
<div id="stock-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
    <div style="background: white; padding: 20px; border-radius: 10px; width: 90%; max-width: 800px; max-height: 80vh; overflow-y: auto;">
        <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 20px;">
            <h2 style="margin: 0;">Stock Levels - All Stores</h2>
            <button onclick="hideStockLevels()" style="background: #e74c3c; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer;">Close</button>
        </div>
        
        <!-- Search Box -->
        <input type="text" id="stock-search" placeholder="Search products..." style="width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 5px;">
        
        <!-- Stock Table -->
        <div id="stock-table-container">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: #34495e; color: white;">
                        <th style="padding: 12px; text-align: left;">Product</th>
                        <th style="padding: 12px; text-align: center;">One Stop</th>
                        <th style="padding: 12px; text-align: center;">Golden</th>
                        <th style="padding: 12px; text-align: center;">Status</th>
                    </tr>
                </thead>
                <tbody id="stock-table-body">
                    <!-- Stock data will be populated here -->
                </tbody>
            </table>
        </div>
        
        <!-- Summary -->
        <div id="stock-summary" style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 5px;"></div>
    </div>
</div>

<!-- Stock Adjustment Modal -->
<div id="stock-adjustment-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
    <div style="background: white; padding: 25px; border-radius: 10px; width: 90%; max-width: 1000px; max-height: 90vh; overflow-y: auto;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="margin: 0;">Stock Adjustment - <span id="adjustment-store-name"></span></h2>
            <button onclick="hideStockAdjustment()" style="background: #e74c3c; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer;">Close</button>
        </div>
        
        <!-- Search and Add Item -->
        <div style="margin-bottom: 25px; position: relative;">
            <input type="text" id="adjustment-search" placeholder="Search products to add..." style="width: 100%; padding: 12px 15px; border: 1px solid #ddd; border-radius: 6px; font-size: 16px;">
            <div id="adjustment-suggestions" style="position: absolute; top: 100%; left: 0; right: 0; background: white; border: 1px solid #ddd; border-top: none; border-radius: 0 0 6px 6px; max-height: 200px; overflow-y: auto; z-index: 100; display: none;"></div>
            <button onclick="addItemToAdjustment()" style="background-color: #3498db; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 16px; margin-top: 15px;">Add Item</button>
        </div>
        
        <!-- Adjustment Items Table -->
        <div id="adjustment-table-container">
            <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                <thead>
                    <tr style="background: #f8f9fa; border-bottom: 2px solid #dee2e6;">
                        <th style="padding: 12px 15px; text-align: left; font-weight: 600; color: #495057;">Product</th>
                        <th style="padding: 12px 15px; text-align: left; font-weight: 600; color: #495057;">Unit</th>
                        <th style="padding: 12px 15px; text-align: left; font-weight: 600; color: #495057;">Adjustment Type</th>
                        <th style="padding: 12px 15px; text-align: left; font-weight: 600; color: #495057;">Quantity</th>
                        <th style="padding: 12px 15px; text-align: left; font-weight: 600; color: #495057;">Action</th>
                    </tr>
                </thead>
                <tbody id="adjustment-table-body">
                    <!-- Adjustment items will be populated here by JavaScript -->
                    <tr class="empty-state-row">
                        <td colspan="5" style="text-align: center; padding: 40px 20px; color: #7f8c8d;">
                            <h3 style="margin: 0 0 10px 0;">No items added yet</h3>
                            <p style="margin: 0;">Search for products above and click "Add Item" to start adjusting stock</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- Summary and Submit -->
        <div style="margin-top: 25px; padding: 15px; background-color: #f8f9fa; border-radius: 6px; display: flex; justify-content: space-between; align-items: center;">
            <div id="adjustment-summary" style="font-weight: 600; color: #2c3e50;">Items to adjust: 0</div>
            <div style="display: flex; gap: 10px;">
                <button onclick="clearAdjustments()" style="background-color: #95a5a6; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 16px;">Clear All</button>
                <button onclick="submitStockAdjustment()" style="background-color: #27ae60; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 16px;">Submit Adjustments</button>
            </div>
        </div>
    </div>
</div>

  <!-- Make sure the JavaScript file has the updated code with decimal support -->
  <script src="script.js"></script>
</body>
</html>


